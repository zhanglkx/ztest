// config/config.ts
import { defineConfig } from '@umijs/max';
import { join } from 'path';

export default defineConfig({
  // CSS Modules 配置
  cssLoader: {
    modules: {
      // 定义生成的类名格式
      localIdentName: '[name]__[local]__[hash:base64:5]',
      
      // 配置 CSS Modules 文件匹配规则
      auto: (resourcePath: string) => {
        // 只对 .module. 或 .m. 结尾的样式文件使用 CSS Modules
        return resourcePath.indexOf('.module.') > -1 || 
               resourcePath.indexOf('.m.') > -1;
      },
    },
  },
  
  // 其他相关配置
  lessLoader: {
    // less 配置
    modifyVars: {
      // 定义 less 变量
      '@primary-color': '#1890ff',
    },
  },
  
  // 配置别名
  alias: {
    '@': join(__dirname, '../src'),
    '@styles': join(__dirname, '../src/styles'),
  },
  
  // 样式方案配置
  styleLoader: {
    // 是否启用 CSS 热更新
    hot: true,
  },
});
